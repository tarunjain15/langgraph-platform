{"name":"conversation-meta-actions","type":"infrastructure","purpose":"Conversation lifecycle visibility and management","capabilities":["conversation:status","conversation:list","conversation:switch"],"conversation:status":{"action":"conversation:status","description":"Returns current conversation metadata","returns":{"conversationId":"Current conversation ID","stats":{"intentCount":"Number of intent checks performed","resourceCount":"Number of resources in shared context","toolCount":"Number of tools used"},"toolsUsed":"Array of tool names used in this conversation","toolPermissions":"Permission grants per tool (with inheritedFrom for M6)"},"permission_required":1,"refusal":"Refuses to execute without valid conversation context"},"conversation:list":{"action":"conversation:list","description":"Lists all conversations with statistics","returns":"Array of conversation summaries with ID, intent count, tool usage","permission_required":1,"refusal":"None - read-only operation"},"conversation:switch":{"action":"conversation:switch","description":"Documents conversation switching via conversationId parameter","note":"Switching is implicit via conversationId, not an explicit action","implementation":"Each tool call includes conversationId - different ID = different conversation","permission_required":1},"context_dependencies":{"required":["conversationId"],"optional":[]}}
{"name":"hot-reload-mechanism","type":"infrastructure","purpose":"Zero-downtime tool evolution","phases":["M1: Hot-Reload Infrastructure","M1+: Infrastructure Hot-Reload (ConversationManager, AlignmentDetector)"],"capabilities":["Dynamic ES module loading","Conversation state preservation (getState/fromState pattern)","File watcher with 500ms debounce","Race-condition free (Node.js event loop guarantee)"],"metrics":{"reload_latency":"<500ms","development_velocity_multiplier":"15x","reload_downtime":"0ms","conversation_continuity":"100%"},"state_migration":{"pattern":"getState() from old instance â†’ setState() to new instance","preservation":"All active conversations preserved","validation":"Registry validates reload doesn't drop conversations"},"watched_paths":["dist/core/","dist/tools/"],"refusals":{"reload_with_active_conversations":"Refuses reload if state migration would fail","reload_without_validation":"Refuses reload if new tool class doesn't implement required interface"}}
{"name":"permission-graduation-system","type":"infrastructure","purpose":"Progressive trust ladder enforcement","levels":{"0":{"name":"Denied","description":"Cannot perform action","actions":[]},"1":{"name":"Read-Only","description":"Can inspect, cannot modify","actions":["identity","who","what-if","evaluate","conversation:status","conversation:list","read-resource","list-resources","validate-resource"]},"2":{"name":"Read-Write","description":"Can modify files, cannot execute","actions":["create-resource","update-resource","write-file","workflow","pipeline","aggregate"]},"3":{"name":"Execute","description":"Can run commands","actions":["dangerous","sudo-test","delete-resource"]},"4":{"name":"Orchestrate","description":"Can spawn sub-tools","implementation":"Permission inheritance from parent (M6)","constraint":"Only through explicit orchestration context (conversationManager, toolRegistry)"}},"approval_flow":{"trigger":"Action requires level > current level","user_prompt":"Tool requests permission upgrade with reason","user_response":"approve:<action> or deny","persistence":"Approval grants persist in conversation state","inheritance":"M6: Child tools inherit parent permission level"},"refusals":{"permission_escalation":"Refuses action requiring higher level without approval","permission_bypass":"Refuses to skip approval flow even for trusted users","permission_inheritance_violation":"Refuses child tool permission higher than parent (M6)"}}
{"name":"alignment-detection-system","type":"infrastructure","purpose":"Intent verification before execution","constraints":["RESOURCE_STEWARDSHIP: Blocks destructive operations","PRIVACY_PRESERVATION: Protects sensitive data","PERMISSION_BOUNDARY: Prevents privilege escalation"],"alignment_states":{"contradiction":{"description":"Action violates constraints","action":"deny","example":"rm -rf / violates RESOURCE_STEWARDSHIP"},"agnostic":{"description":"Action neither violates nor aligns with constraints","action":"request_approval","example":"write-file may or may not be appropriate"},"aligned":{"description":"Action aligns with constraints and intent","action":"proceed","example":"read-file for inspection is aligned"}},"hypothetical_evaluation":{"actions":["what-if:<action>","evaluate"],"purpose":"Test alignment without execution","returns":{"alignment":"contradiction|agnostic|aligned","wouldBeDenied":"boolean","reason":"Explanation of alignment decision"},"permission_required":1},"refusals":{"execution_without_alignment":"Refuses to execute any action without alignment check","dangerous_operation_bypass":"Refuses dangerous operations even if user approves (contradiction state)"}}
{"name":"orchestration-safety-system","type":"infrastructure","purpose":"M6 multi-dimensional orchestration protection","phase":"M6: Multi-Dimensional Orchestration","capabilities":["Tool spawning via ToolContext","Permission inheritance (parent to child)","Recursion depth tracking","Circular dependency detection","Error propagation"],"safety_limits":{"max_depth":5,"circular_detection":"true","error_propagation":"true","permission_inheritance":"parent_to_child_only"},"context_requirements":{"toolRegistry":"Access to available tools","conversationManager":"Ability to spawn tools","parentTool":"Parent tool name (for tracking)","depth":"Recursion depth (0 = root)","callChain":"Tool call chain for circular detection"},"refusals":{"depth_exceeded":"Refuses to spawn beyond maxDepth (default: 5)","circular_dependency":"Refuses to spawn tool already in callChain","permission_escalation":"Refuses child tool permission > parent permission","orchestration_without_context":"Refuses to orchestrate without conversationManager and toolRegistry","error_bypass":"Refuses to continue workflow when child tool fails (configurable in orchestrator-tool)"},"inheritance_rules":{"permission_level":"Child inherits parent's level","approval_grants":"Child inherits parent's approvals","state_isolation":"Child maintains separate conversation state","error_handling":"Parent receives child errors for propagation decision"}}
{"name":"shared-context-system","type":"infrastructure","purpose":"M5 cross-tool resource coordination","phase":"M5: Multi-Tool Orchestration","capabilities":["Resource creation/read/update/delete","Resource isolation per tool","Cross-tool resource access","Resource validation"],"resource_model":{"storage":"In-memory map (conversationId -> resources)","namespacing":"Resources tagged with creator toolName","access_control":"All tools can read, only creator can modify (unless admin-tool)","persistence":"Resources survive within conversation session"},"operations":{"create":"Requires Level 2 permission","read":"Requires Level 1 permission","update":"Requires Level 2 permission, must be creator or admin","delete":"Requires Level 3 permission (admin-tool only)","list":"Requires Level 1 permission","validate":"Requires Level 1 permission"},"refusals":{"creation_without_name":"Refuses to create resource without name parameter","modification_by_non_creator":"Refuses update by tool other than creator (unless admin)","deletion_without_admin":"Refuses delete without Level 3 permission","resource_access_without_shared_context":"Refuses resource operations without SharedContext in ToolContext"}}
