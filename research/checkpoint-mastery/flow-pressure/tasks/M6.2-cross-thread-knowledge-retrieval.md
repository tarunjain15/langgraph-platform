```yaml
task_id: M6.2
phase: M6
type: Feature
status: pending
created: 2025-11-17
```

# Task 6.2: [Feature] Cross-Thread Knowledge Retrieval

## The Constraint

**Before:** Thread A cannot access Thread B's knowledge â†’ isolated conversations
**After:** Agent in Thread A retrieves information from Thread B via Store

---

## The Witness

**Observable Truth:** Agent in Thread A correctly answers question using fact stored in Thread B

---

## Acceptance Criteria

- [ ] Thread B stores fact in shared namespace
- [ ] Thread A agent searches store for relevant facts
- [ ] Thread A retrieves Thread B's fact
- [ ] Thread A uses retrieved fact in response
- [ ] Cross-thread knowledge sharing verified

---

## Code Pattern

```python
# Thread B: Store learned fact
await store.put(
    namespace=["shared_knowledge", "company"],
    key="ceo_name",
    value={"fact": "John Smith is the CEO", "source": "thread-B"}
)

# Thread A: Retrieve fact
async def agent_with_store_access(state, store):
    # Search for relevant knowledge
    query = "Who is the CEO?"
    results = await store.search(
        namespace=["shared_knowledge", "company"],
        query=query,
        limit=5
    )

    # Use retrieved knowledge
    if results:
        context = results[0].value["fact"]
        # Agent uses context: "John Smith is the CEO"
        return {"response": f"Based on shared knowledge: {context}"}

# Thread A agent accesses Thread B's knowledge
```

---

## The Completion Signal

**Signal:** Thread A correctly uses Thread B's stored knowledge in response

**Evidence:** Test transcript showing cross-thread knowledge retrieval

---

## Notes

**Privacy:** Only share knowledge in "shared" namespaces. User-specific data stays in user namespace.

**Similarity Search:** Store supports semantic search - agent finds relevant facts even with different wording.
