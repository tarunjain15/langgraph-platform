```yaml
task_id: R12.3
phase: R12
type: Feature
status: roadmap
created: 2025-11-24
```

# Task R12.3: [Feature] Agent Negotiation Protocol

## The Constraint

**Before:** Coordinator resolves all conflicts centrally (single point of failure)
**After:** Agents negotiate directly via coordination channel (decentralized)

## The Witness

**Observable Truth:** Two agents negotiate action order without coordinator intervention

## Acceptance Criteria

- [ ] Agents read intent channel to detect conflicts
- [ ] Agents send proposals to coordination channel
- [ ] Negotiation protocol defined (propose, accept, reject, counter-propose)
- [ ] Agents reach agreement without coordinator
- [ ] Agreement logged to coordination channel

## Code Pattern

```python
class Agent:
    async def negotiate(self):
        # Check for conflicting intents
        other_intents = await self.intent_channel.read_all()
        conflicts = self.find_conflicts(other_intents, self.my_intent)

        if conflicts:
            # Propose resolution
            for conflict in conflicts:
                proposal = {
                    "type": "negotiate",
                    "from": self.agent_id,
                    "to": conflict["agent_id"],
                    "proposal": "I'll wait for you to finish"
                }
                await self.coordination_channel.send(proposal)

            # Wait for agreement
            agreement = await self.coordination_channel.wait_for_agreement(self.agent_id)
```

## Completion Signal

Two agents negotiate action order, coordination channel logs agreement, execution proceeds

## Notes

Decentralized negotiation scales to N agents - no central coordinator bottleneck
